{
  "files": [
    "pinot-broker/src/main/java/org/apache/pinot/broker/broker/helix/BaseBrokerStarter.java",
    "pinot-common/src/main/java/org/apache/pinot/common/config/provider/TableCache.java",
    "pinot-common/src/main/java/org/apache/pinot/common/config/provider/ZkTableCache.java",
    "pinot-controller/src/main/java/org/apache/pinot/controller/helix/core/PinotHelixResourceManager.java",
    "pinot-controller/src/test/java/org/apache/pinot/controller/helix/TableCacheTest.java"
  ],
  "mergedAt": "2025-08-26T13:32:49Z",
  "number": 16646,
  "title": "[refactor] Refactor TableCache to interface with ZkTableCache implementation",
  "url": "https://github.com/apache/pinot/pull/16646",
  "jcmpClasses": [
    {
      "className": "org.apache.pinot.common.config.provider.TableCache$LogicalTableConfigInfo",
      "type": "deletion",
      "compatible": false,
      "removedMethods": [],
      "addedMethods": [],
      "removedFields": [
        "FINAL(-) org.apache.pinot.spi.data.LogicalTableConfig _logicalTableConfig",
        "FINAL(-) java.util.Map<org.apache.pinot.common.request.Expression,org.apache.pinot.common.request.Expression> _expressionOverrideMap"
      ],
      "addedFields": [],
      "removedConstructors": [
        "PRIVATE(-) TableCache$LogicalTableConfigInfo(org.apache.pinot.spi.data.LogicalTableConfig)"
      ],
      "addedConstructors": []
    },
    {
      "className": "org.apache.pinot.common.config.provider.TableCache$SchemaInfo",
      "type": "deletion",
      "compatible": false,
      "removedMethods": [],
      "addedMethods": [],
      "removedFields": [
        "FINAL(-) org.apache.pinot.spi.data.Schema _schema",
        "FINAL(-) java.util.Map<java.lang.String,java.lang.String> _columnNameMap"
      ],
      "addedFields": [],
      "removedConstructors": [
        "PRIVATE(-) TableCache$SchemaInfo(org.apache.pinot.spi.data.Schema, java.util.Map<java.lang.String,java.lang.String>)"
      ],
      "addedConstructors": []
    },
    {
      "className": "org.apache.pinot.common.config.provider.TableCache$TableConfigInfo",
      "type": "deletion",
      "compatible": false,
      "removedMethods": [],
      "addedMethods": [],
      "removedFields": [
        "FINAL(-) java.util.Set<java.lang.String> _timestampIndexColumns",
        "FINAL(-) org.apache.pinot.spi.config.table.TableConfig _tableConfig",
        "FINAL(-) java.util.Map<org.apache.pinot.common.request.Expression,org.apache.pinot.common.request.Expression> _expressionOverrideMap"
      ],
      "addedFields": [],
      "removedConstructors": [
        "PRIVATE(-) TableCache$TableConfigInfo(org.apache.pinot.spi.config.table.TableConfig)"
      ],
      "addedConstructors": []
    },
    {
      "className": "org.apache.pinot.common.config.provider.TableCache$ZkLogicalTableConfigChangeListener",
      "type": "deletion",
      "compatible": false,
      "removedMethods": [
        "PUBLIC(-) void handleChildChange(java.lang.String, java.util.List<java.lang.String>)",
        "PUBLIC(-) void handleDataChange(java.lang.String, java.lang.Object)",
        "PUBLIC(-) void handleDataDeleted(java.lang.String)"
      ],
      "addedMethods": [],
      "removedFields": [],
      "addedFields": [],
      "removedConstructors": [
        "PRIVATE(-) TableCache$ZkLogicalTableConfigChangeListener(org.apache.pinot.common.config.provider.TableCache)"
      ],
      "addedConstructors": []
    },
    {
      "className": "org.apache.pinot.common.config.provider.TableCache$ZkSchemaChangeListener",
      "type": "deletion",
      "compatible": false,
      "removedMethods": [
        "PUBLIC(-) void handleChildChange(java.lang.String, java.util.List<java.lang.String>)",
        "PUBLIC(-) void handleDataChange(java.lang.String, java.lang.Object)",
        "PUBLIC(-) void handleDataDeleted(java.lang.String)"
      ],
      "addedMethods": [],
      "removedFields": [],
      "addedFields": [],
      "removedConstructors": [
        "PRIVATE(-) TableCache$ZkSchemaChangeListener(org.apache.pinot.common.config.provider.TableCache)"
      ],
      "addedConstructors": []
    },
    {
      "className": "org.apache.pinot.common.config.provider.TableCache$ZkTableConfigChangeListener",
      "type": "deletion",
      "compatible": false,
      "removedMethods": [
        "PUBLIC(-) void handleChildChange(java.lang.String, java.util.List<java.lang.String>)",
        "PUBLIC(-) void handleDataChange(java.lang.String, java.lang.Object)",
        "PUBLIC(-) void handleDataDeleted(java.lang.String)"
      ],
      "addedMethods": [],
      "removedFields": [],
      "addedFields": [],
      "removedConstructors": [
        "PRIVATE(-) TableCache$ZkTableConfigChangeListener(org.apache.pinot.common.config.provider.TableCache)"
      ],
      "addedConstructors": []
    },
    {
      "className": "org.apache.pinot.common.config.provider.ZkTableCache",
      "type": "addition",
      "compatible": true,
      "removedMethods": [],
      "addedMethods": [
        "PRIVATE(+) STATIC(+) void addBuiltInVirtualColumns(org.apache.pinot.spi.data.Schema)",
        "PRIVATE(+) void addLogicalTableConfigs(java.util.List<java.lang.String>)",
        "PRIVATE(+) void addSchemas(java.util.List<java.lang.String>)",
        "PRIVATE(+) void addTableConfigs(java.util.List<java.lang.String>)",
        "PRIVATE(+) STATIC(+) java.util.Map<org.apache.pinot.common.request.Expression,org.apache.pinot.common.request.Expression> createExpressionOverrideMap(java.lang.String, org.apache.pinot.spi.config.table.QueryConfig)",
        "PUBLIC(+) java.lang.String getActualLogicalTableName(java.lang.String)",
        "PUBLIC(+) java.lang.String getActualTableName(java.lang.String)",
        "PUBLIC(+) java.util.List<java.lang.String> getAllDimensionTables()",
        "PUBLIC(+) java.util.Map<java.lang.String,java.lang.String> getColumnNameMap(java.lang.String)",
        "PUBLIC(+) java.util.Map<org.apache.pinot.common.request.Expression,org.apache.pinot.common.request.Expression> getExpressionOverrideMap(java.lang.String)",
        "PUBLIC(+) org.apache.pinot.spi.data.LogicalTableConfig getLogicalTableConfig(java.lang.String)",
        "PUBLIC(+) java.util.List<org.apache.pinot.spi.data.LogicalTableConfig> getLogicalTableConfigs()",
        "PUBLIC(+) java.util.Map<java.lang.String,java.lang.String> getLogicalTableNameMap()",
        "PUBLIC(+) org.apache.pinot.spi.data.Schema getSchema(java.lang.String)",
        "PRIVATE(+) java.util.List<org.apache.pinot.spi.data.Schema> getSchemas()",
        "PUBLIC(+) org.apache.pinot.spi.config.table.TableConfig getTableConfig(java.lang.String)",
        "PRIVATE(+) java.util.List<org.apache.pinot.spi.config.table.TableConfig> getTableConfigs()",
        "PUBLIC(+) java.util.Map<java.lang.String,java.lang.String> getTableNameMap()",
        "PUBLIC(+) java.util.Set<java.lang.String> getTimestampIndexColumns(java.lang.String)",
        "PUBLIC(+) boolean isIgnoreCase()",
        "PUBLIC(+) boolean isLogicalTable(java.lang.String)",
        "PRIVATE(+) void notifyLogicalTableConfigChangeListeners()",
        "PRIVATE(+) void notifySchemaChangeListeners()",
        "PRIVATE(+) void notifyTableConfigChangeListeners()",
        "PRIVATE(+) void putLogicalTableConfig(org.apache.helix.zookeeper.datamodel.ZNRecord)",
        "PRIVATE(+) void putSchema(org.apache.helix.zookeeper.datamodel.ZNRecord)",
        "PRIVATE(+) void putTableConfig(org.apache.helix.zookeeper.datamodel.ZNRecord)",
        "PUBLIC(+) boolean registerLogicalTableConfigChangeListener(org.apache.pinot.spi.config.provider.LogicalTableConfigChangeListener)",
        "PUBLIC(+) boolean registerSchemaChangeListener(org.apache.pinot.spi.config.provider.SchemaChangeListener)",
        "PUBLIC(+) boolean registerTableConfigChangeListener(org.apache.pinot.spi.config.provider.TableConfigChangeListener)",
        "PRIVATE(+) void removeLogicalTableConfig(java.lang.String)",
        "PRIVATE(+) void removeSchema(java.lang.String)",
        "PRIVATE(+) void removeTableConfig(java.lang.String)"
      ],
      "removedFields": [],
      "addedFields": [
        "PRIVATE(+) STATIC(+) FINAL(+) java.lang.String LOWER_CASE_REALTIME_TABLE_SUFFIX",
        "PRIVATE(+) STATIC(+) FINAL(+) java.lang.String TABLE_CONFIG_PATH_PREFIX",
        "PRIVATE(+) STATIC(+) FINAL(+) java.lang.String REALTIME_TABLE_SUFFIX",
        "PRIVATE(+) STATIC(+) FINAL(+) java.lang.String LOWER_CASE_OFFLINE_TABLE_SUFFIX",
        "PRIVATE(+) FINAL(+) org.apache.pinot.common.config.provider.ZkTableCache$ZkSchemaChangeListener _zkSchemaChangeListener",
        "PRIVATE(+) FINAL(+) org.apache.pinot.common.config.provider.ZkTableCache$ZkLogicalTableConfigChangeListener _zkLogicalTableConfigChangeListener",
        "PRIVATE(+) FINAL(+) java.util.Set<org.apache.pinot.spi.config.provider.TableConfigChangeListener> _tableConfigChangeListeners",
        "PRIVATE(+) FINAL(+) org.apache.pinot.common.config.provider.ZkTableCache$ZkTableConfigChangeListener _zkTableConfigChangeListener",
        "PRIVATE(+) FINAL(+) java.util.Map<java.lang.String,java.lang.String> _logicalTableNameMap",
        "PRIVATE(+) FINAL(+) org.apache.helix.store.zk.ZkHelixPropertyStore<org.apache.helix.zookeeper.datamodel.ZNRecord> _propertyStore",
        "PRIVATE(+) FINAL(+) java.util.Map<java.lang.String,org.apache.pinot.common.config.provider.ZkTableCache$SchemaInfo> _schemaInfoMap",
        "PRIVATE(+) FINAL(+) boolean _ignoreCase",
        "PRIVATE(+) STATIC(+) FINAL(+) java.lang.String TABLE_CONFIG_PARENT_PATH",
        "PRIVATE(+) STATIC(+) FINAL(+) java.lang.String SCHEMA_PARENT_PATH",
        "PRIVATE(+) FINAL(+) java.util.Map<java.lang.String,org.apache.pinot.common.config.provider.ZkTableCache$TableConfigInfo> _tableConfigInfoMap",
        "PRIVATE(+) FINAL(+) java.util.Map<java.lang.String,java.lang.String> _tableNameMap",
        "PRIVATE(+) FINAL(+) java.util.Set<org.apache.pinot.spi.config.provider.SchemaChangeListener> _schemaChangeListeners",
        "PRIVATE(+) FINAL(+) java.util.Map<java.lang.String,org.apache.pinot.common.config.provider.ZkTableCache$LogicalTableConfigInfo> _logicalTableConfigInfoMap",
        "PRIVATE(+) STATIC(+) FINAL(+) org.slf4j.Logger LOGGER",
        "PRIVATE(+) STATIC(+) FINAL(+) java.lang.String SCHEMA_PATH_PREFIX",
        "PRIVATE(+) STATIC(+) FINAL(+) java.lang.String OFFLINE_TABLE_SUFFIX",
        "PRIVATE(+) FINAL(+) java.util.Set<org.apache.pinot.spi.config.provider.LogicalTableConfigChangeListener> _logicalTableConfigChangeListeners"
      ],
      "removedConstructors": [],
      "addedConstructors": [
        "PUBLIC(+) ZkTableCache(org.apache.helix.store.zk.ZkHelixPropertyStore<org.apache.helix.zookeeper.datamodel.ZNRecord>, boolean)"
      ]
    },
    {
      "className": "org.apache.pinot.common.config.provider.ZkTableCache$LogicalTableConfigInfo",
      "type": "addition",
      "compatible": true,
      "removedMethods": [],
      "addedMethods": [],
      "removedFields": [],
      "addedFields": [
        "FINAL(+) org.apache.pinot.spi.data.LogicalTableConfig _logicalTableConfig",
        "FINAL(+) java.util.Map<org.apache.pinot.common.request.Expression,org.apache.pinot.common.request.Expression> _expressionOverrideMap"
      ],
      "removedConstructors": [],
      "addedConstructors": [
        "PRIVATE(+) ZkTableCache$LogicalTableConfigInfo(org.apache.pinot.spi.data.LogicalTableConfig)"
      ]
    },
    {
      "className": "org.apache.pinot.common.config.provider.ZkTableCache$SchemaInfo",
      "type": "addition",
      "compatible": true,
      "removedMethods": [],
      "addedMethods": [],
      "removedFields": [],
      "addedFields": [
        "FINAL(+) org.apache.pinot.spi.data.Schema _schema",
        "FINAL(+) java.util.Map<java.lang.String,java.lang.String> _columnNameMap"
      ],
      "removedConstructors": [],
      "addedConstructors": [
        "PRIVATE(+) ZkTableCache$SchemaInfo(org.apache.pinot.spi.data.Schema, java.util.Map<java.lang.String,java.lang.String>)"
      ]
    },
    {
      "className": "org.apache.pinot.common.config.provider.ZkTableCache$TableConfigInfo",
      "type": "addition",
      "compatible": true,
      "removedMethods": [],
      "addedMethods": [],
      "removedFields": [],
      "addedFields": [
        "FINAL(+) java.util.Set<java.lang.String> _timestampIndexColumns",
        "FINAL(+) org.apache.pinot.spi.config.table.TableConfig _tableConfig",
        "FINAL(+) java.util.Map<org.apache.pinot.common.request.Expression,org.apache.pinot.common.request.Expression> _expressionOverrideMap"
      ],
      "removedConstructors": [],
      "addedConstructors": [
        "PRIVATE(+) ZkTableCache$TableConfigInfo(org.apache.pinot.spi.config.table.TableConfig)"
      ]
    },
    {
      "className": "org.apache.pinot.common.config.provider.ZkTableCache$ZkLogicalTableConfigChangeListener",
      "type": "addition",
      "compatible": true,
      "removedMethods": [],
      "addedMethods": [
        "PUBLIC(+) void handleChildChange(java.lang.String, java.util.List<java.lang.String>)",
        "PUBLIC(+) void handleDataChange(java.lang.String, java.lang.Object)",
        "PUBLIC(+) void handleDataDeleted(java.lang.String)"
      ],
      "removedFields": [],
      "addedFields": [],
      "removedConstructors": [],
      "addedConstructors": [
        "PRIVATE(+) ZkTableCache$ZkLogicalTableConfigChangeListener(org.apache.pinot.common.config.provider.ZkTableCache)"
      ]
    },
    {
      "className": "org.apache.pinot.common.config.provider.ZkTableCache$ZkSchemaChangeListener",
      "type": "addition",
      "compatible": true,
      "removedMethods": [],
      "addedMethods": [
        "PUBLIC(+) void handleChildChange(java.lang.String, java.util.List<java.lang.String>)",
        "PUBLIC(+) void handleDataChange(java.lang.String, java.lang.Object)",
        "PUBLIC(+) void handleDataDeleted(java.lang.String)"
      ],
      "removedFields": [],
      "addedFields": [],
      "removedConstructors": [],
      "addedConstructors": [
        "PRIVATE(+) ZkTableCache$ZkSchemaChangeListener(org.apache.pinot.common.config.provider.ZkTableCache)"
      ]
    },
    {
      "className": "org.apache.pinot.common.config.provider.ZkTableCache$ZkTableConfigChangeListener",
      "type": "addition",
      "compatible": true,
      "removedMethods": [],
      "addedMethods": [
        "PUBLIC(+) void handleChildChange(java.lang.String, java.util.List<java.lang.String>)",
        "PUBLIC(+) void handleDataChange(java.lang.String, java.lang.Object)",
        "PUBLIC(+) void handleDataDeleted(java.lang.String)"
      ],
      "removedFields": [],
      "addedFields": [],
      "removedConstructors": [],
      "addedConstructors": [
        "PRIVATE(+) ZkTableCache$ZkTableConfigChangeListener(org.apache.pinot.common.config.provider.ZkTableCache)"
      ]
    }
  ]
}